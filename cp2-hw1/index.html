<html>
  <head>
    <title>sim8086</title>
		<link rel="stylesheet" href="/main.css">
    <link rel="stylesheet" href="./main.css">
    <script src="//unpkg.com/globe.gl"></script>
  </head>
  <body>
    <div id="breadcrumb">
			<a href="/index.html">Home</a>
		</div>
    <div id="globeViz"></div>
    <script type="module">
      /*
      import { main } from "./main.js"
      main();
      */
    const globe = Globe()
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-dark.jpg')
      .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
      .backgroundImageUrl('//unpkg.com/three-globe/example/img/night-sky.png')
      (document.getElementById('globeViz'));

    // from https://www.submarinecablemap.com
    fetch('https://www.submarinecablemap.com/api/v3/cable/cable-geo.json')
      .then(r => r.json())
      .then(cablesGeo => {
        let cablePaths = [];
        cablesGeo.features.forEach(({ geometry, properties }) => {
          geometry.coordinates.forEach(coords => cablePaths.push({ coords, properties }));
        });

        globe
          .pathsData(cablePaths)
          .pathPoints('coords')
          .pathPointLat(p => p[1])
          .pathPointLng(p => p[0])
          .pathColor(path => path.properties.color)
          .pathLabel(path => path.properties.name)
          .pathDashLength(0.1)
          .pathDashGap(0.008)
          .pathDashAnimateTime(12000);
      });
    
    </script>
  </body>
</html>
