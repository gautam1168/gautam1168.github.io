<html>
  <head>
    <title>Haversin</title>
  </head>
  <body>
    <div>
      Python code
      <pre>
        from math import radians, sin, cos, sqrt, asin
        import time 

        def haversine(lat1, lon1, lat2, lon2):

        R = 6372.8 # Earth radius in kilometers

        dLat = radians(lat2 - lat1)
        dLon = radians(lon2 - lon1)
        lat1 = radians(lat1)
        lat2 = radians(lat2)

        a = sin(dLat/2)**2 + cos(lat1)*cos(lat2)*sin(dLon/2)**2
        c = 2*asin(sqrt(a))

        return R * c

        start_time = time.time()
        #START: Performance critical part
        for x in range(1, 1*1000*1000*10): 
        haversine(36.12, -86.67, 33.94, -118.40)
        #END: Performance critical part
        elapsed_time = time.time() - start_time
        print("Python elapsed time = " + str(elapsed_time)+" seconds")
      </pre>
    </div>
    <div>
      <div>
        <pre id="javascript">
        </pre>
      </div>
      <script>
        function radians(degrees) {
          return degrees * 0.0174533;
        }

        function haversine(lat1, lon1, lat2, lon2) {
          const R = 6372.8;

          const dLat = radians(lat2 - lat1);
          const dLon = radians(lon2 - lon1);

          lat1 = radians(lat1);
          lat2 = radians(lat2);

          const a = Math.sin(dLat/2)**2 + Math.cos(lat2)*Math.cos(lat2)*Math.sin(dLon/2)**2;
          const c = 2 * Math.asin(Math.sqrt(a));

          return R * c;
        }

        const start_time = performance.now();
        let pointsLeft = 1000 * 1000 * 10;
        while (pointsLeft--) {
          haversine(36.12, -86.67, 33.94, -118.40);
        }
        const end_time = performance.now();
        const elapsed_time = (end_time - start_time);
        const measure = document.querySelector("#javascript");
        measure.innerText = `Time elapsed: ${elapsed_time}ms`;
      </script>
    </div>
  </body>
</html>
